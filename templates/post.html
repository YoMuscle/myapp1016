{% extends 'base.html' %}
{% block title %}{{ post.title }}{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card mb-3">
      <div class="card-header bg-primary text-white">
        <h3 class="mb-0">{{ post.title }}</h3>
      </div>
      <div class="card-body">
        <p class="text-muted">作者：{{ post.author }}</p>
        <div class="mb-4">{{ post.content }}</div>
        <div class="d-flex gap-2">
          <a href="{{ url_for('index') }}" class="btn btn-secondary">回文章列表</a>
          <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-warning">編輯文章</a>
          <button class="btn btn-danger" onclick="deletePost('{{ post.id }}')">刪除文章</button>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
function deletePost(postId) {
    if (confirm('確定要刪除這篇文章嗎？')) {
        fetch(`/api/posts/${postId}`, {method: 'DELETE'})
            .then(res => {
                if (res.ok) {
                    window.location.href = '/';
                } else {
                    alert('刪除失敗');
                }
            });
    }
}
</script>
{% endblock %}
